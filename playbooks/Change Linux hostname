
---
- name: Set Linux hostname and reboot if changed
  hosts: linux_hosts
  gather_facts: true
  become: true

  vars:
    new_hostname: "linux-01"   # You can override this with AAP survey

  tasks:
    - name: Set hostname
      ansible.builtin.hostname:
        name: "{{ new_hostname }}"
      register: hostname_change

    - name: Reboot if hostname changed
      ansible.builtin.reboot:
               reboot_timeout: 600
